togglemainmenu = [
    if (! (cleargui 1)) [
        showgui main2
    ]
]

bind ESCAPE [togglemainmenu]

newgui main [
	guitext "Bienvenue sur la version Alpha de Cislattack jeune loutre :hap: "
	guitext "N'oublies pas que c'est une Alpha et que c'est loin d'être fini."
	guilist [ 
		guibutton "JOUAY" "showgui main2" 
		guibar 
		guibutton "QUITTAY" "quit" "exit"
	]
] 0

newgui main2 [
    guilist [
        guitext "Pseudal: " (playermodelicon)
        newname = (getname)
        guifield newname 15 [name $newname]
    ]
    guibutton (concat "Smiley:" (playermodelname)) [guirolloveraction = (playermodelbutton $playermodel); showgui playermodel] (playermodelicon)
    guibar
    guibutton "Multijoueurs"  "showgui servers"
    if (isconnected) [
        guibar
        if (|| $editing (m_edit (getmode))) [
            guibutton "Editeur de map" 	"showgui editing"
        ]
        guibutton "Votay le mode/la map" 	"showgui gamemode"
        guibutton "Se connectay au LAN"  	"lanconnect  "           
        guibutton "Changay d'équipe" 		[if (strcmp (getteam) "good") [team evil] [team good]]
        guibutton "Devenir spectateur" 		[spectator (! (isspectator (getclientnum)))] "spectator"
        guibutton "Géray serveur" 			[showgui master]
        guibar
        guibutton "Options"  				[showgui options]
        guibutton "Se déconnectay" 			"disconnect"         "exit"
    ] [
        guibutton "Jouay contre des bots"    "showgui botmatch"
        guibar
        guibutton "Options"        "showgui options"
        guibutton "Quittay"        "quit"
    ]
] 0

genmapitems = [
    looplist curmap $arg1 [
        guibutton $curmap (concat map $curmap) "cube"
    ]
]

showmapshot = [ 
    guibar
    guiimage (concatword "packages/base/" (if (> $numargs 0) [result $arg1] [at $guirollovername 0]) ".jpg") $guirolloveraction 4 1 "data/cube.png"
]

macro playermodelbutton [cleargui 1; playermodel %1]

newgui playermodel [
    guilist [
        guilist [
            loop i $playermodelnum [
                guibutton (playermodelname $i) (playermodelbutton $i) (playermodelicon $i)
            ]
        ]
        guibar
        pmidx = (substr $guirolloveraction (strlen (playermodelbutton "")))
        pmidx = (max 0 (min (- $playermodelnum 1) $pmidx))
        guilist [
            guiplayerpreview $pmidx 0 6 $guirolloveraction 4 1
            guitextbox (playermodelstory $pmidx) 40 9
        ]
    ]
]

newmapsize = 12
savemap_name = temp

newgui editing [
    guibutton "Zones"                           				"showgui materials"
	guibar
    guibutton "Mode édition       (E)"              			"edittoggle"
    guibutton "Mode relief        (H)"              			""
    guibutton "Sélectionner       (Clic gauche)"				""
    guibutton "Déselectionner     (Espace)"         			"cancelsel"
    guibutton "Sélectionner coins (Maintenir cic mollette)"  	""
    guibutton "Etendre sélection  (Clic droit)"     			""
    guibutton "Réorienter         (Clic droit)"     			""
    guibutton "Déplacer sélection (Maintenir clic droit)"       ""
    guibutton "Copier             (C)"			                "copy"
    guibutton "Coller             (V)"			                "paste"

    guitab objets
    guilist [
      guilist [
        guibutton "drop entities.."            "showgui dropent"
        guibutton "Modèle 3D"                  "showgui mapmodels"

        guibutton "Point de respawn"		"newent spawn"
        guibutton "Mossberg 500" 			"newent mossberg500"
        guibutton "Uzi" 					"newent uzi"
        guibutton "SMAW"					"newent SMAW"
        guibutton "SV 98"					"newent SV_98"
        guibutton "M32"						"newent M32
		guibutton "Minigun"					"newent minigun"
		guibutton "Famas"					"newent famas"
		guibutton "Pistolet alien"			"newent pistoletalien"
		guibutton "Glock .21"				"newent glock"
      ]
      guilist [
        guibutton "Téléportation"                   "showgui newteleport"

        guibutton "Panachay"				"newent panachay"
        guibutton "Cochon grillay"			"newent cochongrillay"
        guibutton "Armure en fer"			"newent armurefer"
        guibutton "Armure en diamant"		"newent armurediamant"
        guibutton "Boule magique"			"newent boulemagique"
      ]
    ]

    guitab Outils
    guibutton "Mirroir                       (X)"           "flip"
    guibutton "Annuler action                (U)"           "undo"
    guibutton "Refaire action                (I)"           "redo"
    guibutton "Supprimer                     (Retour)"      "editdel"
    guibutton "Palette de textures           (F2)" 			"showtexgui"
    guibutton "Editon d'objets               (F3)" 			"showentgui"
    guibutton "Liste de modèles 3D           (F4)" 		 	"showgui mapmodels"
    guibutton "Sélectionner tous les objets  (N)" 			"selentfindall"
    guibutton "Modifier objet                (Slash)" 		"selentedit"
    guicheckbox "Afficher polygones          (7)"			outline
    guicheckbox "Désafficher textures        (8)"    		wireframe

    guitab Mollette
    guitext "Pousser/tirer sélection     Molette seulement"
    guitext "Pousser face d'un cube      F + Molette"
    guitext "Changer taille de grille    G + Molette"
    guitext "Changer texture             Y + Molette"
    guitext "Rotation                    R + Molette"
    guitext "Pousser coin avec curseur   Q + Molette"
    guitext "Pousser/Tirer relief        LALT + Molette"
    guitext "Changer brosse de relief    B + Molette"

    guitab Eclairage
	guibutton "Ajouter lumière"                 "resetlight;showgui newlight"
    guicheckbox "Ajouter spot" 					"newent spot"
    guibutton "Calculer lumières" 				"calclight 1"
    guicheckbox "Désactiver/activer éclairage" 	fullbright

    guitab blend
    guitext "blend paint mode:"
	guiradio "off						(keypad 0)" blendpaintmode 0
	guiradio "replace					(keypad 1)" blendpaintmode 1
	guiradio "dig						(keypad 2)" blendpaintmode 2
	guiradio "fill						(keypad 3)" blendpaintmode 3
	guiradio "inverted dig				(keypad 4)" blendpaintmode 4
	guiradio "inverted fill				(keypad 5)" blendpaintmode 5
    guibar
    guitext "paint blendmap			(MOUSELEFT)"
	guibutton "change blend brush			scroll wheel" "nextblendbrush"
	guibutton "rotate blend brush			(MOUSEMIDDLE)" "rotateblendbrush"
	guibutton "clear entire blendmap 		(^"clearblendmap^" command)" "clearblendmap"
	guibutton "clear blendmap in selection	(^"clearblendmapsel^" command)" "clearblendmapsel"

    guitab map
    guitext   "Sauvegarder la map :"
    guifield  savemap_name 20 [ savemap $savemap_name ]
    guibutton [load @savemap_name map]             	"map $savemap_name"
    guibutton "Nouvelle map"          				"newmap $newmapsize"
    guislider "Taille de la nouvelle map" 10 16
    guibutton "Elargir map (X2)"              		"mapenlarge"
    guitext   "Cache de la fonction annuler (en MB) "
    guislider "undomegs" 1 10
    guibutton "Optimiser la géométrie (important)"	"remip"
    guibutton "Définir auteur + titre de la map"    "saycommand [/maptitle ]"

    guitab skybox
    guilist [
        guistayopen [
            guilist [ genskyitems $skies1 ]
            showskyshot
        ]
    ]

    guitab cfg
	guitext "Fichier de config de votre map (.cfg)"
    guitext (mapcfgname)
    showfileeditor (mapcfgname) -60 15
] "Edition"

skies1 = [
ciel/1
ciel/2
ciel/3
ciel/4
ciel/5
]

genskyitems = [
    looplist cursky $arg1 [
        guibutton $cursky (concat skybox $cursky) //"cube"
    ]
]

alias showskyshot [ guibar; guiimage (concatword "<thumbnail:128>packages/" (if (> $numargs 0) [result $arg1] [result (at $guirollovername 0)]) "_ft.jpg") $guirolloveraction 4 1 "data/cube.png"]

setting_entediting = 1

newgui materials [
    guibutton "Air"                        "editmat air"
    guibutton "Eau"                        "editmat water"
    guibutton "Lave"                       "editmat lava"
    guibutton "Vitre"                      "editmat glass"
    guibutton "Collision"                  "editmat clip"
    guibutton "Pas de collision"           "editmat noclip"
    guibutton "Collision monstres"         "editmat gameclip"
    guibutton "Mort"                       "editmat death"
    guibutton "Transparance"               "editmat alpha"

    guicheckbox "show material volumes"    showmat
] "Zones"